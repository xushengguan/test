<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>家长信息</title>
	<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
	<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
	<link rel="stylesheet" href="../../css/api.css">
	<link rel="stylesheet" href="../../css/common.css">
	<link rel="stylesheet" type="text/css" href="../../css/loading.css" />
	<link rel="stylesheet" href="../../icon/iconfonts/iconfont.css">
	<link rel="stylesheet" href="../../css/7account2.css">
</head>

<body>

	<!-- 家长信息 -->
	<div class="account2-con">
		<div class="parent-con">
			<h6>家长信息</h6>
			<div class="sex-con hide">
				<span class="fl">性别</span>
				<p class="fr">
					<span class="circle" id="icon1" onclick="Psel_girl()"><i class="iconfont icon-right" style="display:none"></i></span>
					<span class="girls">女</span>
				</p>
				<p class="fr" style="padding-right:43px;">
					<span class="circle circle2" id="icon2" onclick="Psel_Boy()"><i class="iconfont icon-right"></i></span>
					<span class="girls">男</span>
				</p>
			</div>
			<p class="office-con">
				<span>职业</span>
				<input type="text" placeholder="您现在的职业" style="padding-left: 51px;" id="job">
			</p>
			<p class="office-con">
				<span>住址</span>
				<input type="text" placeholder="输入您现住址" style="padding-left: 51px;" id="address">
			</p>
		</div>
		<div class="parent-con">
			<h6>学生信息</h6>
			<div class="sex-con hide">
				<span class="fl">性别</span>
				<p class="fr">
					<span class="circle" id="icon3" onclick="Ssel_girl()"><i class="iconfont icon-right" style="display:none"></i></span>
					<span class="girls">女</span>
				</p>
				<p class="fr" style="padding-right:43px;">
					<span class="circle circle2" id="icon4" onclick="Ssel_Boy()"><i class="iconfont icon-right"></i></span>
					<span class="girls">男</span>
				</p>
			</div>
			<p class="office-con">
				<span>年龄</span>
				<input type="text" placeholder="您的年龄" style="padding-left: 51px;" id="stu_age">
			</p>
			<p class="office-con">
				<span>所在学校</span>
				<input type="text" placeholder="您目前所在的学校" id="stu_school">
			</p>
			<p class="office-con">
				<span>所在班级</span>
				<input type="text" placeholder="填写您所在的年级" id="stu_class">
			</p>
		</div>
	</div>
	<div class="read-con read-con3">
		<div class="hide read-top">
			<i class="iconfont icon-square fl"></i>
			<i class="iconfont icon-right" style="font-size:7px;"></i>
			<p class="fl agree">已阅读并同意<span style="color:#4c5be5;">《xxx认证协议》</span></p>
		</div>
		<p class="save-btn"><button onclick="save()">保存</button></p>
	</div>

</body>

</html>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/my.js"></script>
<script type="text/javascript">
	var id, par_sex, stu_sex;
	apiready = function() {
		loading();
		id = api.pageParam.id; //用户ID

	}

	//保存
	function save() {
		if ($api.hasCls($api.dom('#icon1'), 'circle2')) {

			par_sex = '0'; //0为女1为男
		}
		if ($api.hasCls($api.dom('#icon2'), 'circle2')) {

			par_sex = '1'; //0为女1为男
		}
		if ($api.hasCls($api.dom('#icon3'), 'circle2')) {

			stu_sex = '0'; //0为女1为男
		}
		if ($api.hasCls($api.dom('#icon4'), 'circle2')) {

			stu_sex = '1'; //0为女1为男
		}

		var job = $api.val($api.dom("#job"));
		var address = $api.val($api.dom("#address"));
		var stu_school = $api.val($api.dom("#stu_school"));
		var stu_class = $api.val($api.dom("#stu_class"));
		var stu_age = $api.val($api.dom("#stu_age"));

		api.ajax({ //完善学生家长详细信息
			url: serverurl,
			method: 'get',
			dataType: 'json',
			data: {
				values: {
					type: '10006',
					uid: id,
					job: job,
					address: address,
					stu_sex: stu_sex,
					stu_age: stu_age,
					stu_school: stu_school,
					stu_class: stu_class,
					par_sex: par_sex
				}
			}
		}, function(ret, err) {

			if (ret) {
				if (ret.status == '1') { //1成功
					api.toast({
						msg: '保存成功',
						duration: 2000,
						location: 'middle'
					});
					go_back();
				} else {
					api.toast({
						msg: '操作失败',
						duration: 2000,
						location: 'middle'
					});
				}
			} else {
				api.toast({
					msg: '网络错误',
					duration: 2000,
					location: 'middle'
				});
			}
		});
	}

	function Psel_girl() {
		sel_sex('#icon1 i', '#icon2 i', '#icon1', '#icon2');
	}

	function Psel_Boy() {
		sel_sex('#icon2 i', '#icon1 i', '#icon2', '#icon1');
	}

	function Ssel_girl() {
		sel_sex('#icon3 i', '#icon4 i', '#icon3', '#icon4');
	}

	function Ssel_Boy() {
		sel_sex('#icon4 i', '#icon3 i', '#icon4', '#icon3');
	}

	//选择性别
	function sel_sex(els, elh, elsTxt, elhTxt) {
		$api.css($api.dom(els), 'display:block');
		$api.css($api.dom(elh), 'display:none');
		$api.addCls($api.dom(elsTxt), 'circle2');
		$api.removeCls($api.dom(elhTxt), 'circle2');
	}
</script>
