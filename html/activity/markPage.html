<!DOCTYPE html>
  <html>
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
      <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
      <title>分数记录</title>
      <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
      <style>
          .markLis li{padding: 8px 15px; background: #fff; position: relative; margin-bottom: 5px;
            display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;
          -webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;
          box-shadow: 0px 1px 0px 0px #dadade;}
          .markLis .img{display: block; width: 43px; height: 43px; border-radius: 50%;}
          .markLis .nickname{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1; font-size: 15px; color: #212121; padding: 0 15px;}
          .markLis span{font-size: 13px; color: #212121;}
          .markLis span em{font-size: 15px;}
      </style>
  </head>
  <body>
      <ul class="markLis" id="app" v-cloak>
          <li v-if="data.status == '0'">暂无打分记录~</li>
          <li v-for="v in data" v-else>
              <img :src="v.stu_img" alt="默认头像" class="img" v-if="v.stu_img">
              <img src="../../image/pic3.png" alt="默认头像" class="img" v-else>
              <div class="nickname">{{v.stu_name}}</div>
              <span>共<em>{{v.score}}</em>分</span>
          </li>
      </ul>
  </body>
  <script type="text/javascript" src="../../script/api.js"></script>
  <script type="text/javascript" src="../../script/my.js"></script>
  <script type="text/javascript" src="../../script/vue.js"></script>
  <script type="text/javascript">
      apiready = function(){
        vm.getMark();
        //刷新
        api.setRefreshHeaderInfo({
            loadingImg: 'widget://image/refresh.png',
            bgColor: '#444',
            textColor: '#fff',
            textUp: '释放立即刷新...',
            textLoading: '加载中···',
            showTime: false
        }, function(ret, err) {
            //在这里从服务器加载数据，加载完成后调用api.refreshHeaderLoadDone()方法恢复组件到默认状态
            vm.getMark();
            api.refreshHeaderLoadDone();
        });
      };

      var vm = new Vue({
          el: '#app',
          data: {
              data: []
          },
          methods: {
              //显示打分记录
              getMark: function getMark() {
                  var token = $api.getStorage('token');
                  var actid = api.pageParam.actid;
                  api.ajax({
                      url: serverurl,
                      method: 'get',
                      data: {
                          values: {
                              type: '10046',
                              token: token,
                              actid: actid
                          }
                      }
                  }, function (ret, err) {
                      if (ret) {
                          if (ret.status == '5') {
                              ExitLogin();
                          }
                          vm.data = ret;
                      } else {

                          api.toast({
                              msg: '网络错误',
                              duration: 2000,
                              location: 'bottom'
                          });
                      }
                  });
              }
          }
      });
  </script>
  </html>
