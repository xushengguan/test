<!DOCTYPE html>
  <html>
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
      <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
      <title>信用评级</title>
      <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
      <link rel="stylesheet" type="text/css" href="../../css/loading.css"/>
      <style>
          .content{width: 100%; height: 160px; display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;
           background: #fff; margin-bottom: 10px; box-shadow: 0 2px 6px 0 rgba(0,0,0,.1);}
          .box{margin: auto;}
          .star{width: 100%; text-align: center;}
          .star li{display: inline-block; width: 37px; height: 35px; background: url(../../image/star.png) no-repeat center;
          background-size: contain; margin: 0 2px;}
          .msg{font-size: 18px; color: #333; text-align: center; margin-top: 23px;}
          .msg em{font-size: 20px; color: #ffb300; margin-left: 2px;}

          .explain{padding: 29px 15px; background-color: #fff; min-height: calc(100% - 228px);
            background: url(../../image/txt.png) no-repeat top center; background-size: contain;}
          #app{height: 100%; overflow: auto;}
      </style>
  </head>
  <body>
      <div id="app" v-cloak>
        <div class="content">
            <div class="box">
                <ul class="star">
                    <li v-for="v in num"></li>
                </ul>
                <div class="msg">
                    信用评级
                    <em>{{credit}}星</em>
                </div>
            </div>
        </div>
        <div class="explain"></div>
      </div>
  </body>
  <script type="text/javascript" src="../../script/api.js"></script>
  <script type="text/javascript" src="../../script/my.js"></script>
  <script type="text/javascript" src="../../script/vue.js"></script>

  <script type="text/javascript">
      var id,token;
      apiready = function(){
        loading();
        token = $api.getStorage('token');
        id = $api.getStorage('id');
          vm.getRating();
      };

      var vm = new Vue({
          el:'#app',
          data:{
              credit:'',
              num:''
          },
          methods:{
              getRating(){//查看用户账单
                  $api.css($api.byId('loading'),'display:block');
                  $api.css($api.byId('app'),'display:none');
                  api.ajax({
                      url: serverurl,
                      method: 'get',
                      data: {
                          values: {
                               type: '10157',
                               token:token,
                               uid:id
                          },
                      }
                  },function(ret, err){
                      $api.css($api.byId('loading'),'display:none');
                      vm.credit = ret.credit;
                      vm.num = parseInt(ret.credit);
                      $api.css($api.byId('app'),'display:block');

                  });
              }
          }
      })
  </script>
  </html>
