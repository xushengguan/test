<!DOCTYPE html>
  <html>
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
      <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
      <title>信用评级</title>
      <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
      <link rel="stylesheet" type="text/css" href="../../css/loading.css"/>
      <style>
          .content{width: 100%; height: 160px; display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;
           background: #fff; margin-bottom: 10px; box-shadow: 0 2px 6px 0 rgba(0,0,0,.1);}
          .box{margin: auto;}
          .star{width: 100%; text-align: center;}
          .star li{display: inline-block; width: 37px; height: 35px; background: url(../../image/star.png) no-repeat center;
          background-size: contain; margin: 0 2px;}
          .msg{font-size: 18px; color: #333; text-align: center; margin-top: 23px;}
          .msg em{font-size: 20px; color: #ffb300; margin-left: 2px;}

          .explain{min-height: calc(100% - 349px); padding: 0 15px; background: #fff; font-size: 15px; color: #212121;}
          .explain .title{padding-top: 29px; padding-bottom: 25px;}
          .title .titleName{color: #ccc; padding-bottom: 6px;}
          .title .txt{color: #999; font-size: 13px;}
          .starLis li{padding-bottom: 25px;}
          .starLis li .gradeName{color: #ffb300; padding-bottom: 6px;}
      </style>
  </head>
  <body>
      <div id="app" v-cloak>
        <div class="content">
            <div class="box">
                <ul class="star">
                    <li v-for="v in num"></li>
                </ul>
                <div class="msg">
                    信用评级
                    <em>{{credit}}星</em>
                </div>
            </div>
        </div>
        <div class="explain">
            <div class="title">
                <p class="titleName">星级说明</p>
                <p class="txt">出现作弊或虚假数据事件后，会扣除相应星级。</p>
            </div>
            <ul class="starLis">
                <li>
                    <p class="gradeName">5星</p>
                    <p>您的信用优秀，不受任何限制。</p>
                </li>
                <li>
                    <p class="gradeName">4星</p>
                    <p>助教没收保证金学员限制参加大型赛事。</p>
                </li>
                <li>
                    <p class="gradeName">3星</p>
                    <p>助教取消资格，未结算的学分及未提的	现金全部罚没，拒绝提现。限制学员的家长晋级，取消家长申请合作伙伴的资格。</p>
                </li>
                <li>
                    <p class="gradeName">2星</p>
                    <p>限制学分兑换功能。</p>
                </li>
                <li>
                    <p class="gradeName">1星</p>
                    <p>冻结账户。</p>
                </li>
            </ul>
        </div>
      </div>
  </body>
  <script type="text/javascript" src="../../script/api.js"></script>
  <script type="text/javascript" src="../../script/my.js"></script>
  <script type="text/javascript" src="../../script/vue.js"></script>

  <script type="text/javascript">
      var id,token;
      apiready = function(){
        loading();
        token = $api.getStorage('token');
        id = $api.getStorage('id');
          vm.getRating();
      };

      var vm = new Vue({
          el:'#app',
          data:{
              credit:'',
              num:''
          },
          methods:{
              getRating(){//查看用户等级
                  $api.css($api.byId('loading'),'display:block');
                  $api.css($api.byId('app'),'display:none');
                  api.ajax({
                      url: serverurl,
                      method: 'get',
                      cache:true,
                      data: {
                          values: {
                               type: '10157',
                               token:token,
                               uid:id
                          },
                      }
                  },function(ret, err){
                      $api.css($api.byId('loading'),'display:none');
                      if (ret) {
                          if (ret.status == '5') {
                              ExitLogin();
                          }else {
                              vm.credit = ret.credit;
                              vm.num = parseInt(ret.credit);
                              $api.css($api.byId('app'),'display:block');
                          }

                      }else {
                          api.toast({
                              msg: '网络错误',
                              duration: 2000,
                              location: 'bottom'
                          });

                      }


                  });
              }
          }
      })
  </script>
  </html>
